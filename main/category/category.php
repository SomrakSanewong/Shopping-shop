<div class="container">
    <div class="row">
        <div class="col-lg-4 sidebar">
            <div class="widgets-container">
                <div class="widget-item product-categories-widget">
                    <h3 class="widget-title">Categories</h3>
                    <ul class="category-tree list-unstyled mb-0">
                        <li class="category-item">
                            <div class="d-flex justify-content-between align-items-center category-header" data-bs-toggle="collapse" data-bs-target="#categories-1-clothing-subcategories" aria-expanded="true" aria-controls="categories-1-clothing-subcategories">
                                <a href="javascript:void(0)" class="category-link">Clothing</a>
                                <span class="category-toggle">
                                    <i class="bi bi-chevron-down"></i>
                                    <i class="bi bi-chevron-up"></i>
                                </span>
                            </div>
                            <ul id="categories-1-clothing-subcategories" class="subcategory-list list-unstyled ps-3 mt-2 collapse">
                                <li><a href="#" class="subcategory-link">Men's Wear</a></li>
                                <li><a href="#" class="subcategory-link">Women's Wear</a></li>
                                <li><a href="#" class="subcategory-link">Kids' Clothing</a></li>
                                <li><a href="#" class="subcategory-link">Accessories</a></li>
                            </ul>
                        </li>
                        <li class="category-item">
                            <div class="d-flex justify-content-between align-items-center category-header collapsed" data-bs-toggle="collapse" data-bs-target="#categories-1-electronics-subcategories" aria-expanded="false" aria-controls="categories-1-electronics-subcategories">
                                <a href="javascript:void(0)" class="category-link">Electronics</a>
                                <span class="category-toggle">
                                    <i class="bi bi-chevron-down"></i>
                                    <i class="bi bi-chevron-up"></i>
                                </span>
                            </div>
                            <ul id="categories-1-electronics-subcategories" class="subcategory-list list-unstyled ps-3 mt-2 collapse">
                                <li><a href="#" class="subcategory-link">Smartphones</a></li>
                                <li><a href="#" class="subcategory-link">Laptops</a></li>
                                <li><a href="#" class="subcategory-link">Tablets</a></li>
                                <li><a href="#" class="subcategory-link">Accessories</a></li>
                            </ul>
                        </li>
                        <li class="category-item">
                            <div class="d-flex justify-content-between align-items-center category-header collapsed" data-bs-toggle="collapse" data-bs-target="#categories-1-home-subcategories" aria-expanded="false" aria-controls="categories-1-home-subcategories">
                                <a href="javascript:void(0)" class="category-link">Home &amp; Kitchen</a>
                                <span class="category-toggle">
                                    <i class="bi bi-chevron-down"></i>
                                    <i class="bi bi-chevron-up"></i>
                                </span>
                            </div>
                            <ul id="categories-1-home-subcategories" class="subcategory-list list-unstyled collapse ps-3 mt-2">
                                <li><a href="#" class="subcategory-link">Furniture</a></li>
                                <li><a href="#" class="subcategory-link">Kitchen Appliances</a></li>
                                <li><a href="#" class="subcategory-link">Home Decor</a></li>
                                <li><a href="#" class="subcategory-link">Bedding</a></li>
                            </ul>
                        </li>
                        <li class="category-item">
                            <div class="d-flex justify-content-between align-items-center category-header collapsed" data-bs-toggle="collapse" data-bs-target="#categories-1-beauty-subcategories" aria-expanded="false" aria-controls="categories-1-beauty-subcategories">
                                <a href="javascript:void(0)" class="category-link">Beauty &amp; Personal Care</a>
                                <span class="category-toggle">
                                    <i class="bi bi-chevron-down"></i>
                                    <i class="bi bi-chevron-up"></i>
                                </span>
                            </div>
                            <ul id="categories-1-beauty-subcategories" class="subcategory-list list-unstyled collapse ps-3 mt-2">
                                <li><a href="#" class="subcategory-link">Skincare</a></li>
                                <li><a href="#" class="subcategory-link">Makeup</a></li>
                                <li><a href="#" class="subcategory-link">Hair Care</a></li>
                                <li><a href="#" class="subcategory-link">Fragrances</a></li>
                            </ul>
                        </li>
                        <li class="category-item">
                            <div class="d-flex justify-content-between align-items-center category-header collapsed" data-bs-toggle="collapse" data-bs-target="#categories-1-sports-subcategories" aria-expanded="false" aria-controls="categories-1-sports-subcategories">
                                <a href="javascript:void(0)" class="category-link">Sports &amp; Outdoors</a>
                                <span class="category-toggle">
                                    <i class="bi bi-chevron-down"></i>
                                    <i class="bi bi-chevron-up"></i>
                                </span>
                            </div>
                            <ul id="categories-1-sports-subcategories" class="subcategory-list list-unstyled collapse ps-3 mt-2">
                                <li><a href="#" class="subcategory-link">Fitness Equipment</a></li>
                                <li><a href="#" class="subcategory-link">Outdoor Gear</a></li>
                                <li><a href="#" class="subcategory-link">Sports Apparel</a></li>
                                <li><a href="#" class="subcategory-link">Team Sports</a></li>
                            </ul>
                        </li>
                        <li class="category-item">
                            <div class="d-flex justify-content-between align-items-center category-header">
                                <a href="#" class="category-link">Books</a>
                            </div>
                        </li>
                        <li class="category-item">
                            <div class="d-flex justify-content-between align-items-center category-header collapsed" data-bs-toggle="collapse" data-bs-target="#categories-1-toys-subcategories" aria-expanded="false" aria-controls="categories-1-toys-subcategories">
                                <a href="javascript:void(0)" class="category-link">Toys &amp; Games</a>
                                <span class="category-toggle">
                                    <i class="bi bi-chevron-down"></i>
                                    <i class="bi bi-chevron-up"></i>
                                </span>
                            </div>
                            <ul id="categories-1-toys-subcategories" class="subcategory-list list-unstyled collapse ps-3 mt-2">
                                <li><a href="#" class="subcategory-link">Board Games</a></li>
                                <li><a href="#" class="subcategory-link">Puzzles</a></li>
                                <li><a href="#" class="subcategory-link">Action Figures</a></li>
                                <li><a href="#" class="subcategory-link">Educational Toys</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
                <div class="widget-item pricing-range-widget">
                    <h3 class="widget-title">Price Range</h3>
                    <div class="price-range-container">
                        <div class="current-range mb-3">
                            <span class="min-price">0</span>
                            <span class="max-price float-end">440</span>
                        </div>
                        <div class="range-slider">
                            <div class="slider-track">
                                <div class="slider-progress" style="left: 0%; width: 44%;"></div>
                                <input type="range" class="min-range" min="0" max="1000" value="0" step="10">
                                <input type="range" class="max-range" min="0" max="1000" value="500" step="10">
                            </div>
                        </div>
                        <div class="price-inputs mt-3">
                            <div class="row g-2">
                                <div class="col-6">
                                    <div class="input-group input-group-sm">
                                        <span class="input-group-text">$</span>
                                        <input type="number" class="form-control min-price-input" placeholder="Min" min="0" max="1000" value="0" step="10">
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="input-group input-group-sm">
                                        <span class="input-group-text">$</span>
                                        <input type="number" class="form-control max-price-input" placeholder="Max" min="0" max="1000" value="500" step="10">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="filter-actions mt-3">
                            <button type="button" class="btn btn-sm btn-primary w-100">Apply Filter</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-8">
            <?php include 'categoryBar.php' ?>
            <?php include 'categoryProduct.php' ?>
        </div>
    </div>
</div>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        const minRange = document.querySelector(".min-range");
        const maxRange = document.querySelector(".max-range");

        const minInput = document.querySelector(".min-price-input");
        const maxInput = document.querySelector(".max-price-input");

        const minPriceText = document.querySelector(".min-price");
        const maxPriceText = document.querySelector(".max-price");

        const progress = document.querySelector(".slider-progress");

        const rangeMinGap = 10;

        function updateSlider() {
            let minVal = parseInt(minRange.value);
            let maxVal = parseInt(maxRange.value);
            let maxRangeVal = parseInt(maxRange.max);

            progress.style.left = (minVal / maxRangeVal) * 100 + "%";
            progress.style.width = ((maxVal - minVal) / maxRangeVal) * 100 + "%";

            minPriceText.innerText = minVal;
            maxPriceText.innerText = maxVal;

            minInput.value = minVal;
            maxInput.value = maxVal;
        }
        minRange.addEventListener("input", function() {
            if (parseInt(maxRange.value) - parseInt(minRange.value) <= rangeMinGap) {
                minRange.value = parseInt(maxRange.value) - rangeMinGap;
            }
            updateSlider();
        });

        maxRange.addEventListener("input", function() {
            if (parseInt(maxRange.value) - parseInt(minRange.value) <= rangeMinGap) {
                maxRange.value = parseInt(minRange.value) + rangeMinGap;
            }
            updateSlider();
        });

        minInput.addEventListener("input", function() {
            let val = parseInt(minInput.value);
            if (val < 0) val = 0;
            if (val > parseInt(maxRange.value) - rangeMinGap) {
                val = parseInt(maxRange.value) - rangeMinGap;
            }
            minRange.value = val;
            updateSlider();
        });

        maxInput.addEventListener("input", function() {
            let val = parseInt(maxInput.value);
            if (val > parseInt(maxRange.max)) val = parseInt(maxRange.max);
            if (val < parseInt(minRange.value) + rangeMinGap) {
                val = parseInt(minRange.value) + rangeMinGap;
            }
            maxRange.value = val;
            updateSlider();
        });

        updateSlider();
    });
</script>